{% extends "base.html" %}

{% block title %}Expense Categories{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Expense Categories</h1>
</div>

<div class="form-row">
    <div class="card" style="flex: 1;">
        <div class="card-header">Add New Category</div>
        <div class="card-body">
            <form method="post" action="{{ url_for('accounting.add_expense_category') }}">
                <div class="form-row">
                    <div class="form-group" style="flex: 2;">
                        <label class="form-label">Category Name *</label>
                        <input type="text" name="name" class="form-control" required placeholder="e.g. Rent, Utilities, Transport">
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label">&nbsp;</label>
                        <button type="submit" class="btn btn-primary">+ Add Category</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">Expense Categories</div>
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Category Name</th>
                    <th>Created</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% if categories %}
                    {% for cat in categories %}
                    <tr>
                        <td>{{ cat.name }}</td>
                        <td>{{ cat.created_at.strftime('%d-%m-%Y') if cat.created_at else '-' }}</td>
                        <td class="actions">
                            <form method="post" action="{{ url_for('accounting.delete_expense_category', id=cat.id) }}" 
                                  style="display: inline;" onsubmit="return confirm('Delete this category?');">
                                <button type="submit" class="btn btn-sm btn-secondary">Delete</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="3" class="text-center text-muted">No expense categories yet. Add one above.</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>

<div class="card">
    <div class="card-header">Default Categories</div>
    <div class="card-body">
        <p class="text-muted">Common expense categories for a business:</p>
        <ul>
            <li>Rent / Lease</li>
            <li>Utilities (Electricity, Water, Internet)</li>
            <li>Salaries &amp; Wages</li>
            <li>Transport / Delivery</li>
            <li>Packaging Materials</li>
            <li>Office Supplies</li>
            <li>Marketing / Advertising</li>
            <li>Maintenance / Repairs</li>
            <li>Miscellaneous</li>
        </ul>
    </div>
</div>
{% endblock %}
